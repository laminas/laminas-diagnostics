<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Universal set of diagnostic tests for PHP applications."> 

    
    
    <meta name="docsearch:version" content="latest">
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:component" content="laminas-diagnostics">

    <link rel="canonical" href="https://docs.laminas.dev/laminas-diagnostics/diagnostics/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Diagnostic Checks - laminas-diagnostics - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://api-tools.getlaminas.org/documentation" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-api-tools-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>API Tools</strong><br>
                                        Build RESTful APIs in Minutes
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-diagnostics</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../introduction/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../usage/" class="subnavigation__link">Basic Usage</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Checks</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Diagnostic Checks</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../file-validation/" class="subnavigation__link">File Validation Checks</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../architecture/" class="subnavigation__link">Architecture</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../custom-checks/" class="subnavigation__link">Writing Custom Checks</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../custom-reporters/" class="subnavigation__link">Writing Custom Reporters</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-diagnostics</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-diagnostics" class="header__link header__link--github" title="Go to repository of laminas-diagnostics">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#apcfragmentation" class="toc__link nav-link">ApcFragmentation</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#apcmemory" class="toc__link nav-link">ApcMemory</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#callback" class="toc__link nav-link">Callback</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#classexists" class="toc__link nav-link">ClassExists</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#couchdbcheck" class="toc__link nav-link">CouchDBCheck</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#cpuperformance" class="toc__link nav-link">CpuPerformance</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#dirreadable" class="toc__link nav-link">DirReadable</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#dirwritable" class="toc__link nav-link">DirWritable</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#diskfree" class="toc__link nav-link">DiskFree</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#diskusage" class="toc__link nav-link">DiskUsage</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#extensionloaded" class="toc__link nav-link">ExtensionLoaded</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#httpservice" class="toc__link nav-link">HttpService</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#guzzlehttpservice" class="toc__link nav-link">GuzzleHttpService</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#memcache" class="toc__link nav-link">Memcache</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#memcached" class="toc__link nav-link">Memcached</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#mongodb" class="toc__link nav-link">MongoDb</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#opcachememory" class="toc__link nav-link">OpCacheMemory</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#pdocheck" class="toc__link nav-link">PDOCheck</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#phpversion" class="toc__link nav-link">PhpVersion</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#phpflag" class="toc__link nav-link">PhpFlag</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#processrunning" class="toc__link nav-link">ProcessRunning</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#rabbitmq" class="toc__link nav-link">RabbitMQ</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#redis" class="toc__link nav-link">Redis</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#securityadvisory" class="toc__link nav-link">SecurityAdvisory</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#streamwrapperexists" class="toc__link nav-link">StreamWrapperExists</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#doctrinemigration" class="toc__link nav-link">DoctrineMigration</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-diagnostics</a></li>

                
                    
                        
                        
                            <li class="breadcrumb-item">Checks</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">Diagnostic Checks</li>
            
        
    </ol>
</nav>






    
    
        <h2 class="chapter__headline">Checks</h2>
    

    <h1 id="diagnostic-checks">Diagnostic Checks</h1>
<p>laminas/laminas-diagnostics provides several "just add water" checks you can
use straight away.</p>
<p>The following built-in tests are currently available:</p>
<h2 id="apcfragmentation">ApcFragmentation</h2>
<p>Make sure that <a href="https://www.php.net/apc/">APC memory fragmentation level</a> is below a
given threshold:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\ApcFragmentation;

// Display a warning with fragmentation &gt; 50% and failure when above 90%
$fragmentation = new ApcFragmentation(50, 90);</code></pre>
<h2 id="apcmemory">ApcMemory</h2>
<p>Check <a href="https://www.php.net/apc/">APC memory usage percent</a> and make sure it's below a
given threshold.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\ApcMemory;

// Display a warning with memory usage is above 70% and a failure above 90%
$checkFreeMemory = new ApcMemory(70, 90);</code></pre>
<h2 id="callback">Callback</h2>
<p>Run a function (callback) and use its return value as the result:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\Callback;
use Laminas\Diagnostics\Result\Success;
use Laminas\Diagnostics\Result\Failure;

$checkDbFile = new Callback(function() {
    $path = __DIR__ . '/data/db.sqlite';
    if (is_file($path) &amp;&amp; is_readable($path) &amp;&amp; filesize($path)) {
        return new Success('Db file is ok');
    }

    return new Failure('There is something wrong with the db file');
});</code></pre>
<blockquote>
<h3 id="callback-signature">Callback signature</h3>
<p>The callback must return either a <code>boolean</code> (true for success, false for
failure), or a valid instance of
<a href="https://github.com/laminas/laminas-diagnostics/tree/master/src/Result/ResultInterface.php">ResultInterface</a>.
All other objects will result in an exception, and scalars (i.e. a string) will
be interpreted as warnings.</p>
</blockquote>
<h2 id="classexists">ClassExists</h2>
<p>Check if a class (or an array of classes) exists. For example:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\ClassExists;

$checkLuaClass = new ClassExists('Lua');
$checkRbacClasses = new ClassExists([
    'ZfcRbac\Module',
    'ZfcRbac\Controller\Plugin\IsGranted'
]);</code></pre>
<h2 id="couchdbcheck">CouchDBCheck</h2>
<p>Check if a connection to a given CouchDB server is possible.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\CouchDBCheck;

// Simple check without credentials
$couchDbNoCredentials = new CouchDBCheck(['url' =&gt; 'http://127.0.0.1:5984']);

// Check with user and password
$couchDbSettings = [
    'protocol' =&gt; 'http',
    'host'     =&gt; '127.0.0.1',
    'port'     =&gt; '5984',
    'username' =&gt; 'my_username',
    'password' =&gt; 'I0z&amp;+oFP^FHdd9%i',
    'dbname'   =&gt; 'my_database',
];
$couchDbWithCredentials = new CouchDBCheck($couchDbSettings);</code></pre>
<h2 id="cpuperformance">CpuPerformance</h2>
<p>Benchmark CPU performance and return failure if it is below the given ratio. The
baseline for performance calculation is the speed of an Amazon EC2 Micro Instance
(Q1 2013). You can specify the expected performance for the test, where a ratio
of <code>1.0</code> (one) means at least the speed of EC2 Micro Instance. A ratio of <code>2</code>
would mean "at least double the performance of EC2 Micro Instance" and a
fraction of <code>0.5</code> means "at least half the performance of Micro Instance".</p>
<p>The following check will test if current server has at least half the CPU power
of EC2 Micro Instance:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\CpuPerformance;

$checkMinCPUSpeed = new CpuPerformance(0.5); // at least 50% of EC2 micro instance</code></pre>
<h2 id="dirreadable">DirReadable</h2>
<p>Check if a given path (or array of paths) points to a directory and it is
readable.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\DirReadable;

$checkPublic = new DirReadable('public/');
$checkAssets = new DirReadable([
    __DIR__ . '/assets/img',
    __DIR__ . '/assets/js',
]);</code></pre>
<h2 id="dirwritable">DirWritable</h2>
<p>Check if a given path (or array of paths) points to a directory and if it can be
written to.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\DirWritable;

$checkTemporary = new DirWritable('/tmp');
$checkAssets    = new DirWritable([
    __DIR__ . '/assets/customImages',
    __DIR__ . '/assets/customJs',
    __DIR__ . '/assets/uploads',
]);</code></pre>
<h2 id="diskfree">DiskFree</h2>
<p>Check if there is enough remaining free disk space.</p>
<p>The first parameter is the minimum disk space, which can be supplied as an
integer (in bytes, e.g. <code>1024</code>) or as a string with a multiplier (IEC, SI or
Jedec; e.g.  <code>"150MB"</code>). The second parameter is the path to check; on *NIX
systems it is an ordinary path (e.g. <code>/home</code>), while on Windows systems it is a
drive letter (e.g.  <code>"C:"</code>).</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\DiskFree;

$tempHasAtLeast100Megs  = new DiskFree('100MB', '/tmp');
$homeHasAtLeast1TB      = new DiskFree('1TiB',  '/home');
$dataHasAtLeast900Bytes = new DiskFree(900, __DIR__ . '/data/');</code></pre>
<h2 id="diskusage">DiskUsage</h2>
<p>Check if the disk usage is below warning/critical percent thresholds.</p>
<p>The first parameter is the warning threshold, which can be supplied as an
integer (in percent, e.g. <code>80</code>). The second parameter is the critical
threshold, which is also supplied as an integer (in percent, e.g. <code>90</code>). The
third parameter is the disk path to check; on *NIX systems it is an ordinary
path (e.g. <code>/tmp</code>), while on Windows systems it is a drive letter (e.g.  <code>C:</code>).</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\DiskUsage;

$diskUsageNix = new DiskUsage(80, 90, '/tmp');
$diskUsageWin = new DiskUsage(80, 90,  'C:');</code></pre>
<h2 id="extensionloaded">ExtensionLoaded</h2>
<p>Check if a PHP extension (or an array of extensions) is currently loaded.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\ExtensionLoaded;

$checkMbstring    = new ExtensionLoaded('mbstring');
$checkCompression = new ExtensionLoaded([
    'rar',
    'bzip2',
    'zip',
]);</code></pre>
<h2 id="httpservice">HttpService</h2>
<p>Attempt connection to a given HTTP host or IP address and try to load a web
page. The check also supports checking response codes and page contents.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\HttpService;

// Try to connect to google.com
$checkGoogle = new HttpService('www.google.com');

// Check port 8080 on localhost
$checkLocal = new HttpService('127.0.0.1', 8080);

// Check that the page exists (response code must equal 200)
$checkPage = new HttpService('www.example.com', 80, '/some/page.html', 200);

// Check page content
$checkPageContent = new HttpService(
    'www.example.com',
    80,
    '/some/page.html',
    200,
    '&lt;title&gt;Hello World&lt;/title&gt;'
);</code></pre>
<h2 id="guzzlehttpservice">GuzzleHttpService</h2>
<p>Attempt connection to a given HTTP host or IP address and try to load a web page
using <a href="https://docs.guzzlephp.org/en/stable/">Guzzle</a>. The check also supports
checking response codes and page contents.</p>
<p>The constructor signature of the <code>GuzzleHttpService</code> is as follows:</p>
<pre class="highlight"><code class="language-php">/**
 * @param string|Psr\Http\Message\RequestInterface|GuzzleHttp\Message\RequestInterface $requestOrUrl
 *     The absolute url to check, or a fully-formed request instance.
 * @param array $headers An array of headers used to create the request
 * @param array $options An array of guzzle options to use when sending the request
 * @param int $statusCode The response status code to check
 * @param null $content The response content to check
 * @param null|GuzzleHttp\ClientInterface $guzzle Instance of guzzle to use
 * @param string $method The method of the request
 * @param mixed $body The body of the request (used for POST, PUT and DELETE requests)
 * @throws InvalidArgumentException
 */
public function __construct(
    $requestOrUrl,
    array $headers = [],
    array $options = [],
    $statusCode = 200,
    $content = null,
    $guzzle = null,
    $method = 'GET',
    $body = null
)</code></pre>
<p>Examples:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\GuzzleHttpService;

// Try to connect to google.com
$checkGoogle = new GuzzleHttpService('www.google.com');

// Check port 8080 on localhost
$checkLocal = new GuzzleHttpService('127.0.0.1:8080');

// Check that the page exists (response code must equal 200)
$checkPage = new GuzzleHttpService('www.example.com/some/page.html');

// Check page content
$checkPageContent = new GuzzleHttpService(
    'www.example.com/some/page.html',
    [],
    [],
    200,
    '&lt;title&gt;Hello World&lt;/title&gt;'
);

// Check that the post request returns the content
$checkPageContent = new GuzzleHttpService(
    'www.example.com/user/update',
    [],
    [],
    200,
    '{"status":"success"}',
    'POST',
    ['post_field' =&gt; 'post_value']
);</code></pre>
<p>You can send JSON data by either providing a <code>Content-Type</code> header that includes
a JSON content type, or creating a request instance with JSON content:</p>
<pre class="highlight"><code class="language-php">// Send page content
$checkPageContent = new GuzzleHttpService(
    'api.example.com/ping',
    ['Content-Type' =&gt; 'application/json'],
    [],
    200,
    null,
    null,
    'POST',
    ['ping' =&gt; microtime()]
);

// Assuming Guzzle 6:
use GuzzleHttp\Psr7\Request;
$request = new Request(
    'POST',
    'http://api.example.com/ping',
    ['Content-Type' =&gt; 'application/json'],
    json_encode(['ping' =&gt; microtime()])
);
$checkPageContent = new GuzzleHttpService($request);</code></pre>
<h2 id="memcache">Memcache</h2>
<p>Attempt to connect to given Memcache server.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\Memcache;

$checkLocal  = new Memcache('127.0.0.1'); // default port
$checkBackup = new Memcache('10.0.30.40', 11212);
$checkSocket = new Memcache('unix:///run/memcached/memcached.sock', 0);</code></pre>
<h2 id="memcached">Memcached</h2>
<p>Attempt to connect to the given Memcached server.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\Memcached;

$checkLocal  = new Memcached('127.0.0.1'); // default port
$checkBackup = new Memcached('10.0.30.40', 11212);
$checkSocket = new Memcached('/run/memcached/memcached.sock', 0);</code></pre>
<h2 id="mongodb">MongoDb</h2>
<p>Check if a connection to a given MongoDb server is possible.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\Mongo;

$mongoCheck = new Mongo('mongodb://127.0.0.1:27017');
// and with user/password
$mongoCheck = new Mongo('mongodb://user:password@127.0.0.1:27017');</code></pre>
<h2 id="opcachememory">OpCacheMemory</h2>
<p>Check <a href="https://www.php.net/opcache">OPcache memory usage percent</a> and make sure it's below a
given threshold.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\OpCacheMemory;

// Display a warning with memory usage is above 70% and a failure above 90%
$opCacheMemory = new OpCacheMemory(70, 90);</code></pre>
<h2 id="pdocheck">PDOCheck</h2>
<p>Check if a connection to a given database server is possible.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\PDOCheck;

$pdoMySql = new PDOCheck('mysql://localhost/my_database', 'my_username', 'oFPZc!W&amp;zV&gt;,YCrz');
$pdoSqlite = new PDOCheck('sqlite:example.db', '', '');</code></pre>
<h2 id="phpversion">PhpVersion</h2>
<p>Check if the current PHP version matches the given requirement. The test accepts
2 parameters: baseline version and optional
<a href="https://www.php.net/version_compare">comparison operator</a>.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\PhpVersion;

$require545orNewer  = new PhpVersion('5.4.5');
$rejectBetaVersions = new PhpVersion('5.5.0', '&lt;');</code></pre>
<h2 id="phpflag">PhpFlag</h2>
<p>Make sure that the provided PHP flag(s) is enabled or disabled (as defined in
<code>php.ini</code>). You can use this test to alert the user about unsafe or
behavior-changing PHP settings.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\PhpFlag;

// This check will fail if use_only_cookies is not enabled
$sessionOnlyUsesCookies = new PhpFlag('session.use_only_cookies', true);

// This check will fail if safe_mode has been enabled
$noSafeMode = new PhpFlag('safe_mode', false);

// The following will fail if any of the flags is enabled
$check = new PhpFlag([
    'expose_php',
    'ignore_user_abort',
    'html_errors',
], false);</code></pre>
<h2 id="processrunning">ProcessRunning</h2>
<p>Check if a given unix process is running. This check supports PIDs and process
names.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\ProcessRunning;

$checkApache = new ProcessRunning('httpd');
$checkProcess1000 = new ProcessRunning(1000);</code></pre>
<h2 id="rabbitmq">RabbitMQ</h2>
<p>Validate that a RabbitMQ service is running.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\RabbitMQ;

$rabbitMQCheck = new RabbitMQ('localhost', 5672, 'guest', 'guest', '/');</code></pre>
<h2 id="redis">Redis</h2>
<p>Validate that a Redis service is running.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\Redis;

$redisCheck = new Redis('localhost', 6379, 'secret');</code></pre>
<h2 id="securityadvisory">SecurityAdvisory</h2>
<p>Run a security check of libraries locally installed by
<a href="https://getcomposer.org/">Composer</a> against <a href="https://security.symfony.com/">SensioLabs Security Advisory
database</a>, and warn about potential
security vulnerabilities.</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\SecurityAdvisory;

// Warn about any packages that might have security vulnerabilities
// and require updating
$security = new SecurityAdvisory();

// Check another composer.lock
$security = new SecurityAdvisory('/var/www/project/composer.lock');</code></pre>
<h2 id="streamwrapperexists">StreamWrapperExists</h2>
<p>Check if a given stream wrapper (or an array of wrappers) is available. For
example:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Laminas\Diagnostics\Check\StreamWrapperExists;

$checkOGGStream   = new StreamWrapperExists('ogg');
$checkCompression = new StreamWrapperExists([
    'zlib',
    'bzip2',
    'zip',
]);</code></pre>
<h2 id="doctrinemigration">DoctrineMigration</h2>
<p>Make sure all migrations are applied:</p>
<pre class="highlight"><code class="language-php">&lt;?php
use Doctrine\Migrations\Configuration\Configuration;
use Doctrine\ORM\EntityManager;
use Laminas\Diagnostics\Check\DoctrineMigration;

$em = EntityManager::create(/* config */);
$migrationConfig = new Configuration($em);
$check = new DoctrineMigration($migrationConfig);</code></pre>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../usage/">
                    <small class="page-nav__label">Previous</small>
                    <i class="fa fa-chevron-left"></i>
                    Basic Usage
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../file-validation/">
                    <small class="page-nav__label">Next</small>
                    File Validation Checks
                    <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-diagnostics</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../introduction/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../usage/" class="subnavigation__link">Basic Usage</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Checks</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Diagnostic Checks</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../file-validation/" class="subnavigation__link">File Validation Checks</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../architecture/" class="subnavigation__link">Architecture</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../custom-checks/" class="subnavigation__link">Writing Custom Checks</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../custom-reporters/" class="subnavigation__link">Writing Custom Reporters</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-diagnostics/blob/-/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-diagnostics/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2023 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "components",
            siteName = 'laminas-diagnostics';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-diagnostics" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
